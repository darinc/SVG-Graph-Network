!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.GraphNetwork=e():t.GraphNetwork=e()}(this,function(){return function(){"use strict";var t={d:function(e,i){for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return n}});class i{constructor(t=0,e=0){this.x=t,this.y=e}add(t){return new i(this.x+t.x,this.y+t.y)}subtract(t){return new i(this.x-t.x,this.y-t.y)}multiply(t){return new i(this.x*t,this.y*t)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){const t=this.magnitude();return t>0?new i(this.x/t,this.y/t):new i(0,0)}}class s{constructor(t,e=800,s=600){this.data=t,this.position=new i(Math.random()*e,Math.random()*s),this.velocity=new i,this.force=new i,this.size=t.size||20,this.isFixed=!1,this.dynamicWidth=null,this.dynamicHeight=null}resetPosition(t,e){this.isFixed||(this.position=new i(Math.random()*t,Math.random()*e),this.velocity=new i)}fix(){this.isFixed=!0,this.velocity=new i}unfix(){this.isFixed=!1}}var n=class{constructor(t,e={}){if(this.containerId=t,this.container=document.getElementById(t),!this.container)throw new Error(`Container element with id "${t}" not found.`);this.config={damping:.95,repulsionStrength:6500,attractionStrength:.001,zoomSensitivity:1.01,filterDepth:1,groupingStrength:.001,showControls:!0,showLegend:!0,showTitle:!0,showBreadcrumbs:!0,theme:"dark",title:"Graph Network",...e.config},this.nodes=new Map,this.links=[],this.adjList=new Map,this.nodeElements=new Map,this.linkElements=new Map,this.filteredNodes=null,this.currentFilterNodeId=null,this.isDragging=!1,this.dragNode=null,this.isPanning=!1,this.lastMouse={x:0,y:0},this.transformState={x:0,y:0,scale:1},this.setupContainer(),e.data&&this.setData(e.data),this.setupEventListeners(),this.animate()}setupContainer(){this.container.className="graph-network-container",this.container.setAttribute("data-theme",this.config.theme);const{width:t,height:e}=this.container.getBoundingClientRect();this.width=t,this.height=e,this.centerX=t/2,this.centerY=e/2,this.canvas=document.createElement("div"),this.canvas.className="graph-network-canvas",this.container.appendChild(this.canvas),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.className="graph-network-svg",this.canvas.appendChild(this.svg);const i=document.createElementNS("http://www.w3.org/2000/svg","defs"),s=document.createElementNS("http://www.w3.org/2000/svg","marker");s.setAttribute("id",`arrowhead-${this.containerId}`),s.setAttribute("viewBox","0 -5 10 10"),s.setAttribute("refX","8"),s.setAttribute("refY","0"),s.setAttribute("orient","auto"),s.setAttribute("markerUnits","strokeWidth");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M0,-5L10,0L0,5"),n.setAttribute("fill","#5a5a5a"),s.appendChild(n),i.appendChild(s),this.svg.appendChild(i),this.transformGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.transformGroup.id="transform-group",this.svg.appendChild(this.transformGroup),this.linkGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.nodeGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.labelGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.transformGroup.appendChild(this.linkGroup),this.transformGroup.appendChild(this.nodeGroup),this.transformGroup.appendChild(this.labelGroup),this.tooltip=document.createElement("div"),this.tooltip.className="graph-network-tooltip",this.container.appendChild(this.tooltip),this.createTitle(),this.createBreadcrumbs(),this.createLegend(),this.createControls(),this.createSettingsPanel()}createTitle(){this.config.showTitle&&(this.titleElement=document.createElement("div"),this.titleElement.className="graph-network-title",this.titleElement.textContent=this.config.title,this.container.appendChild(this.titleElement))}createBreadcrumbs(){this.config.showBreadcrumbs&&(this.viewInfo=document.createElement("div"),this.viewInfo.className="graph-network-view-info",this.container.appendChild(this.viewInfo),this.renderBreadcrumbs(null))}createLegend(){if(!this.config.showLegend)return;this.legend=document.createElement("div"),this.legend.className="graph-network-legend";const t=document.createElement("div");t.className="graph-network-legend-header";const e=document.createElement("h4");e.textContent="Legend";const i=document.createElement("button");i.className="graph-network-legend-toggle",i.textContent="âˆ’",i.addEventListener("click",()=>{const t=this.legend.classList.toggle("minimized");i.textContent=t?"+":"âˆ’"}),t.appendChild(e),t.appendChild(i);const s=document.createElement("div");s.className="graph-network-legend-content",[{color:"#E53E3E",text:"Major Powers"},{color:"#4299E1",text:"Regional Powers"},{color:"#38A169",text:"Small Nations"},{color:"#ED8936",text:"Territories"}].forEach(t=>{const e=document.createElement("div");e.className="legend-section";const i=document.createElement("div");i.className="legend-item";const n=document.createElement("div");n.className="legend-color",n.style.backgroundColor=t.color;const a=document.createElement("span");a.className="legend-text",a.textContent=t.text,i.appendChild(n),i.appendChild(a),e.appendChild(i),s.appendChild(e)}),this.legend.appendChild(t),this.legend.appendChild(s),this.container.appendChild(this.legend)}createControls(){this.config.showControls&&(this.controls=document.createElement("div"),this.controls.className="graph-network-controls",this.themeToggle=document.createElement("button"),this.themeToggle.className="graph-network-theme-toggle",this.themeToggle.textContent="light"===this.config.theme?"ðŸŒ™":"ðŸŒž",this.themeToggle.addEventListener("click",()=>this.toggleTheme()),this.settingsToggle=document.createElement("button"),this.settingsToggle.className="graph-network-settings-toggle",this.settingsToggle.textContent="^",this.settingsToggle.addEventListener("click",()=>this.toggleSettings()),this.controls.appendChild(this.themeToggle),this.controls.appendChild(this.settingsToggle),this.container.appendChild(this.controls))}createSettingsPanel(){if(!this.config.showControls)return;this.settingsPanel=document.createElement("div"),this.settingsPanel.className="graph-network-settings";const t=document.createElement("h3");t.textContent="Simulation Controls",this.settingsPanel.appendChild(t),[{id:"damping",label:"Damping",min:0,max:20,value:10,step:.5},{id:"repulsion",label:"Repulsion",min:0,max:20,value:13,step:.5},{id:"attraction",label:"Attraction",min:0,max:20,value:10,step:.1},{id:"zoom-sensitivity",label:"Zoom Sensitivity",min:.01,max:2,value:1.01,step:.01},{id:"filter-depth",label:"Filter Depth",min:1,max:3,value:1,step:1},{id:"grouping",label:"Grouping",min:0,max:20,value:10,step:.5}].forEach(t=>{const e=document.createElement("div");e.className="control-group";const i=document.createElement("label");i.setAttribute("for",`${t.id}-slider-${this.containerId}`),i.innerHTML=`${t.label} (<span id="${t.id}-value-${this.containerId}">${t.value}</span>)`;const s=document.createElement("input");s.type="range",s.id=`${t.id}-slider-${this.containerId}`,s.min=t.min,s.max=t.max,s.value=t.value,s.step=t.step,s.addEventListener("input",e=>this.handleSliderChange(t.id,e.target.value)),e.appendChild(i),e.appendChild(s),this.settingsPanel.appendChild(e)});const e=document.createElement("button");e.className="graph-network-reset-button",e.textContent="Reset View & Layout",e.addEventListener("click",()=>this.resetViewAndLayout()),this.settingsPanel.appendChild(e),this.container.appendChild(this.settingsPanel)}handleSliderChange(t,e){const i=parseFloat(e),s=document.getElementById(`${t}-value-${this.containerId}`);switch(t){case"damping":if(0===i)this.config.damping=1;else{const t=i/20;this.config.damping=Math.exp(Math.log(1)*(1-t)+Math.log(.35)*t)}s.textContent=i.toFixed(1);break;case"repulsion":this.config.repulsionStrength=500*i,s.textContent=i.toFixed(1);break;case"attraction":this.config.attractionStrength=i/1e4,s.textContent=i.toFixed(1);break;case"zoom-sensitivity":this.config.zoomSensitivity=i,s.textContent=i.toFixed(2);break;case"filter-depth":this.config.filterDepth=parseInt(i),s.textContent=this.config.filterDepth,this.currentFilterNodeId&&this.filterByNode(this.currentFilterNodeId,this.config.filterDepth);break;case"grouping":this.config.groupingStrength=i/1e4,s.textContent=i.toFixed(1)}}toggleSettings(){const t=this.settingsPanel.classList.toggle("is-open");this.settingsToggle.textContent=t?"v":"^"}toggleTheme(){const t="dark"===this.config.theme?"light":"dark";this.setTheme(t)}setTheme(t){this.config.theme=t,this.container.setAttribute("data-theme",t),this.themeToggle&&(this.themeToggle.textContent="light"===t?"ðŸŒ™":"ðŸŒž"),this.emit("themeChanged",{theme:t})}setData(t){this.clearGraph(),this.parseData(t),this.setupSVGElements(),this.render()}parseData(t){t.nodes.forEach(t=>{const e=new s(t,this.width,this.height);this.nodes.set(t.id,e),this.adjList.set(t.id,[])}),t.links.forEach(t=>{const e=this.nodes.get(t.source),i=this.nodes.get(t.target);if(e&&i){const s={source:e,target:i,label:t.label,weight:t.weight,line_type:t.line_type};this.links.push(s),this.adjList.get(t.source).push({node:i.data.id,link:s}),this.adjList.get(t.target).push({node:e.data.id,link:s})}})}measureTextWidth(t){const e=document.createElementNS("http://www.w3.org/2000/svg","text");e.textContent=t,e.setAttribute("font-size","14px"),e.setAttribute("font-weight","bold"),e.setAttribute("font-family","Inter, sans-serif"),e.style.visibility="hidden",this.svg.appendChild(e);const i=e.getBBox().width;return this.svg.removeChild(e),i}setupSVGElements(){const t=Array.from(this.nodes.values());this.links.forEach(t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","line");e.classList.add("link"),e.setAttribute("marker-end",`url(#arrowhead-${this.containerId})`),t.weight&&(e.style.strokeWidth=`${t.weight}px`),"dashed"===t.line_type?e.style.strokeDasharray="5, 5":"dotted"===t.line_type&&(e.style.strokeDasharray="2, 2"),this.linkGroup.appendChild(e);const i=document.createElementNS("http://www.w3.org/2000/svg","text");i.textContent=t.label,i.classList.add("edge-label-text"),this.labelGroup.appendChild(i),this.linkElements.set(t,{linkEl:e,labelText:i})}),t.forEach(t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","g");let i;e.setAttribute("data-id",t.data.id);let s=null;switch(t.data.shape){case"rectangle":const e=this.measureTextWidth(t.data.name),n=20,a=2*t.size,o=Math.max(a,e+n),r=1.4*t.size;t.dynamicWidth=o,t.dynamicHeight=r;const h=4;s=document.createElementNS("http://www.w3.org/2000/svg","rect"),s.setAttribute("x",-(o+h)/2),s.setAttribute("y",-(r+h)/2),s.setAttribute("width",o+h),s.setAttribute("height",r+h),s.setAttribute("rx",5),s.classList.add("hidden-connection-indicator"),s.style.display="none",i=document.createElementNS("http://www.w3.org/2000/svg","rect"),i.setAttribute("x",-o/2),i.setAttribute("y",-r/2),i.setAttribute("width",o),i.setAttribute("height",r),i.setAttribute("rx",5);break;case"square":const d=1.4*t.size;i=document.createElementNS("http://www.w3.org/2000/svg","rect"),i.setAttribute("x",-d/2),i.setAttribute("y",-d/2),i.setAttribute("width",d),i.setAttribute("height",d),i.setAttribute("rx",5);break;case"triangle":const l=1.4*t.size,c=["0,"+.577*-l,`${.5*-l},${.288*l}`,`${.5*l},${.288*l}`].join(" ");i=document.createElementNS("http://www.w3.org/2000/svg","polygon"),i.setAttribute("points",c);break;default:i=document.createElementNS("http://www.w3.org/2000/svg","circle"),i.setAttribute("r",t.size)}i.classList.add("node-shape",`node-${t.data.type}`),s&&e.appendChild(s),e.appendChild(i);const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.textContent=t.data.name,n.classList.add("node-text"),n.setAttribute("dominant-baseline","central"),e.appendChild(n),this.nodeGroup.appendChild(e),this.nodeElements.set(t,{group:e,shape:i,text:n,hiddenIndicator:s})})}setupEventListeners(){this.nodeGroup.addEventListener("mousedown",t=>{const e=t.target.closest("g[data-id]");if(e){const i=e.getAttribute("data-id"),s=this.nodes.get(i);this.handleNodeMouseDown(t,s)}}),this.nodeGroup.addEventListener("dblclick",t=>{const e=t.target.closest("g[data-id]");if(e){const i=e.getAttribute("data-id"),s=this.nodes.get(i);this.handleNodeDoubleClick(t,s)}}),this.nodeGroup.addEventListener("mouseenter",t=>{const e=t.target.closest("g[data-id]");if(e){const t=e.getAttribute("data-id"),i=this.nodes.get(t);this.showTooltip(i)}}),this.nodeGroup.addEventListener("mouseleave",()=>{this.hideTooltip()}),this.svg.addEventListener("mousedown",t=>this.handleSvgMouseDown(t)),this.svg.addEventListener("mousemove",t=>this.handleSvgMouseMove(t)),this.svg.addEventListener("mouseup",()=>this.handleSvgMouseUp()),this.svg.addEventListener("wheel",t=>this.handleWheel(t)),window.addEventListener("resize",()=>this.handleResize())}handleNodeMouseDown(t,e){t.preventDefault(),e.isFixed||(this.isDragging=!0,this.dragNode=e,this.emit("nodeMouseDown",{node:e,event:t}))}handleNodeDoubleClick(t,e){t.preventDefault(),this.currentFilterNodeId===e.data.id?this.resetFilter():this.filterByNode(e.data.id),this.emit("nodeDoubleClick",{node:e,event:t})}handleSvgMouseDown(t){t.target.closest(".node-shape")||t.target.closest(".edge-label-text")||(this.settingsPanel&&this.settingsPanel.classList.contains("is-open")&&(this.settingsPanel.classList.remove("is-open"),this.settingsToggle&&(this.settingsToggle.textContent="^")),this.isPanning=!0,this.lastMouse={x:t.clientX,y:t.clientY},t.preventDefault())}handleSvgMouseMove(t){if(this.isDragging&&this.dragNode){const e=this.svg.getBoundingClientRect();this.dragNode.position.x=(t.clientX-e.left-this.transformState.x)/this.transformState.scale,this.dragNode.position.y=(t.clientY-e.top-this.transformState.y)/this.transformState.scale,this.showTooltip(this.dragNode),this.tooltip.style.left=`${t.clientX+10}px`,this.tooltip.style.top=`${t.clientY+10}px`}else if(this.isPanning){const e=t.clientX-this.lastMouse.x,i=t.clientY-this.lastMouse.y;this.transformState.x+=e,this.transformState.y+=i,this.lastMouse={x:t.clientX,y:t.clientY}}}handleSvgMouseUp(){this.isDragging=!1,this.dragNode=null,this.isPanning=!1}handleWheel(t){t.preventDefault();const e=this.svg.getBoundingClientRect(),i=t.clientX-e.left,s=t.clientY-e.top,n=this.transformState.scale,a=t.deltaY<0?n*this.config.zoomSensitivity:n/this.config.zoomSensitivity;this.transformState.scale=Math.max(.2,Math.min(2,a)),this.transformState.x=i-(i-this.transformState.x)*(this.transformState.scale/n),this.transformState.y=s-(s-this.transformState.y)*(this.transformState.scale/n),this.emit("zoom",{scale:this.transformState.scale,x:this.transformState.x,y:this.transformState.y})}handleResize(){const{width:t,height:e}=this.container.getBoundingClientRect();this.width=t,this.height=e,this.centerX=t/2,this.centerY=e/2,this.emit("resize",{width:t,height:e})}showTooltip(t){this.tooltip.textContent=t.data.name,this.tooltip.style.opacity=1}hideTooltip(){this.tooltip.style.opacity=0}filterByNode(t,e=null){const i=null!==e?e:this.config.filterDepth,s=this.nodes.get(t);if(!s)return;this.currentFilterNodeId=t;const n=new Set([s.data.id]),a=new Map;a.set(s.data.id,null);const o=[{id:s.data.id,depth:0}];let r=0;for(;r<o.length;){const{id:t,depth:e}=o[r++];e>=i||this.adjList.get(t).forEach(i=>{n.has(i.node)||(n.add(i.node),a.set(i.node,t),o.push({id:i.node,depth:e+1}))})}this.filteredNodes=n,this.updateGraphView(),this.renderBreadcrumbs([t]),this.emit("filtered",{nodeId:t,depth:i,visibleNodes:Array.from(n)})}resetFilter(){this.filteredNodes=null,this.currentFilterNodeId=null,this.updateGraphView(),this.renderBreadcrumbs(null),this.emit("filterReset")}updateGraphView(){const t=this.filteredNodes;this.nodes.forEach(e=>{const i=!t||t.has(e.data.id),s=this.nodeElements.get(e);if(s.group.style.display=i?"block":"none",i&&s.hiddenIndicator){let i=!1;this.adjList.get(e.data.id).forEach(e=>{t&&!t.has(e.node)&&(i=!0)}),s.hiddenIndicator.style.display=i?"block":"none"}else s.hiddenIndicator&&(s.hiddenIndicator.style.display="none")}),this.links.forEach(e=>{const i=!t||t.has(e.source.data.id)&&t.has(e.target.data.id);this.linkElements.get(e).linkEl.style.display=i?"block":"none",this.linkElements.get(e).labelText.style.display=i?"block":"none"})}renderBreadcrumbs(t){if(!this.viewInfo)return;this.viewInfo.innerHTML="";const e=document.createElement("a");e.textContent="All",e.href="#",e.classList.add("breadcrumb-link"),e.addEventListener("click",t=>{t.preventDefault(),this.resetFilter()}),this.viewInfo.appendChild(e),t&&t.length>0&&t.forEach(t=>{this.viewInfo.appendChild(document.createTextNode(" > "));const e=this.nodes.get(t).data.name,i=document.createElement("a");i.textContent=e,i.href="#",i.classList.add("breadcrumb-link"),i.addEventListener("click",e=>{e.preventDefault(),this.filterByNode(t)}),this.viewInfo.appendChild(i)})}resetViewAndLayout(){Array.from(this.nodes.values()).forEach(t=>{t.resetPosition(this.width,this.height)}),this.transformState={x:0,y:0,scale:1},this.resetFilter(),this.emit("reset")}updateForces(){const t=Array.from(this.nodes.values());t.forEach(t=>t.force=new i);for(let e=0;e<t.length;e++)for(let i=e+1;i<t.length;i++){const s=t[e],n=t[i];if(this.filteredNodes&&(!this.filteredNodes.has(s.data.id)||!this.filteredNodes.has(n.data.id)))continue;const a=s.position.subtract(n.position),o=a.magnitude();if(0===o)continue;const r=a.normalize().multiply(this.config.repulsionStrength/(o*o));if(s.force=s.force.add(r),n.force=n.force.subtract(r),s.data.type===n.data.type&&this.config.groupingStrength>0){const t=a.normalize().multiply(-this.config.groupingStrength*o);s.force=s.force.add(t),n.force=n.force.subtract(t)}}this.links.forEach(t=>{if(this.filteredNodes&&(!this.filteredNodes.has(t.source.data.id)||!this.filteredNodes.has(t.target.data.id)))return;const e=t.source.position.subtract(t.target.position),i=e.magnitude();if(0===i)return;const s=e.normalize().multiply(this.config.attractionStrength*i);t.source.force=t.source.force.subtract(s),t.target.force=t.target.force.add(s)})}updatePositions(){Array.from(this.nodes.values()).forEach(t=>{t.isFixed||t===this.dragNode||this.filteredNodes&&!this.filteredNodes.has(t.data.id)||(t.velocity=t.velocity.add(t.force.multiply(1)),t.velocity=t.velocity.multiply(this.config.damping),t.position=t.position.add(t.velocity.multiply(1)))})}render(){this.transformGroup.style.transform=`translate(${this.transformState.x}px, ${this.transformState.y}px) scale(${this.transformState.scale})`,this.links.forEach(t=>{const e=this.linkElements.get(t),i=t.source.position,s=t.target.position,n=s.subtract(i),a=n.magnitude();let o=s.x,r=s.y;if("rectangle"===t.target.data.shape&&a>0){const e=(t.target.dynamicWidth||2.8*t.target.size)/2,i=(t.target.dynamicHeight||1.4*t.target.size)/2,a=Math.atan2(n.y,n.x),h=Math.abs(a);let d=e,l=i;h>Math.atan2(i,e)&&h<Math.PI-Math.atan2(i,e)?d=i/Math.tan(h):l=e*Math.tan(h),o=s.x-d*Math.sign(n.x),r=s.y-l*Math.sign(n.y)}else if("circle"===t.target.data.shape&&a>t.target.size){const e=(a-t.target.size)/a;o=i.x+n.x*e,r=i.y+n.y*e}e.linkEl.setAttribute("x1",i.x),e.linkEl.setAttribute("y1",i.y),e.linkEl.setAttribute("x2",o),e.linkEl.setAttribute("y2",r);const h=(i.x+o)/2,d=(i.y+r)/2;e.labelText.setAttribute("x",h),e.labelText.setAttribute("y",d)}),Array.from(this.nodes.values()).forEach(t=>{this.nodeElements.get(t).group.setAttribute("transform",`translate(${t.position.x},${t.position.y})`)})}animate(){this.isDragging||this.isPanning||(this.updateForces(),this.updatePositions()),this.render(),this.animationFrame=requestAnimationFrame(()=>this.animate())}clearGraph(){for(this.nodes.clear(),this.links.length=0,this.adjList.clear(),this.nodeElements.clear(),this.linkElements.clear(),this.filteredNodes=null,this.currentFilterNodeId=null;this.linkGroup.firstChild;)this.linkGroup.removeChild(this.linkGroup.firstChild);for(;this.nodeGroup.firstChild;)this.nodeGroup.removeChild(this.nodeGroup.firstChild);for(;this.labelGroup.firstChild;)this.labelGroup.removeChild(this.labelGroup.firstChild)}destroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.clearGraph(),this.container.innerHTML="",this.container.className="",this.container.removeAttribute("data-theme"),this.emit("destroyed")}on(t,e){this.events||(this.events={}),this.events[t]||(this.events[t]=[]),this.events[t].push(e)}emit(t,e){this.events&&this.events[t]&&this.events[t].forEach(t=>t(e))}addNode(t){const e=new s(t,this.width,this.height);this.nodes.set(t.id,e),this.adjList.set(t.id,[]),this.emit("nodeAdded",{node:e})}removeNode(t){this.nodes.get(t)&&(this.links=this.links.filter(e=>e.source.data.id!==t&&e.target.data.id!==t),this.nodes.delete(t),this.adjList.delete(t),this.emit("nodeRemoved",{nodeId:t}))}getNode(t){return this.nodes.get(t)}getNodes(){return Array.from(this.nodes.values())}getLinks(){return[...this.links]}fitToView(){if(0===this.nodes.size)return;const t=Array.from(this.nodes.values()).map(t=>t.position),e=Math.min(...t.map(t=>t.x)),i=Math.max(...t.map(t=>t.x)),s=Math.min(...t.map(t=>t.y)),n=Math.max(...t.map(t=>t.y)),a=i-e,o=n-s,r=(e+i)/2,h=(s+n)/2,d=this.width/(a+100),l=this.height/(o+100),c=Math.min(d,l,1);this.transformState.scale=c,this.transformState.x=this.centerX-r*c,this.transformState.y=this.centerY-h*c,this.emit("fitted",{scale:c,x:this.transformState.x,y:this.transformState.y})}};return e.default}()});